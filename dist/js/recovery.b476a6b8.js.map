{"version":3,"sources":["webpack:///./node_modules/gotrue-js/lib/admin.js","webpack:///./node_modules/gotrue-js/lib/user.js","webpack:///./src/views/Recover.vue?9de6","webpack:///./src/views/html/Recover.html","webpack:///./src/views/js/Recover.js","webpack:///./src/views/js/Recover.js?640e","webpack:///./src/views/Recover.vue?b2c3","webpack:///./node_modules/gotrue-js/lib/index.js","webpack:///./node_modules/micro-api-client/lib/index.js","webpack:///./node_modules/micro-api-client/lib/pagination.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","Admin","user","this","aud","_request","method","audience","id","attributes","arguments","undefined","body","JSON","stringify","email","password","default","_extends","assign","source","hasOwnProperty","call","_microApiClient","_microApiClient2","_interopRequireDefault","_admin","_admin2","obj","__esModule","ExpiryMargin","storageKey","refreshPromises","currentUser","forbiddenUpdateAttributes","api","token","url","forbiddenSaveAttributes","isBrowser","window","User","tokenResponse","apiURL","_processTokenResponse","_this","then","response","_saveUserData","_refreshSavedSession","forceRefresh","_tokenDetails","tokenDetails","expires_at","refresh_token","access_token","Date","now","_refreshToken","Promise","resolve","clearSession","bind","catch","_this2","request","headers","error","reject","path","_this3","options","jwt","Authorization","err","JSONHTTPError","json","msg","message","error_description","fromStorage","_fromStorage","claims","parse","urlBase64Decode","split","exp","e","console","Error","localStorage","getItem","_saveSession","setItem","_details","removeSavedSession","get","userCopy","removeItem","apiInstance","data","ex","str","output","replace","result","atob","decodeURIComponent","escape","render","_vm","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","updatePassword","attrs","_v","directives","name","rawName","expression","domProps","composing","newPassword","_s","_e","staticRenderFns","passwordUpdated","created","verify","methods","auth","GoTrue","APIUrl","setCookie","recover","$route","params","pathMatch","res","update","component","_user","_user2","HTTPRegexp","defaultApiURL","_ref","_ref$APIUrl","_ref$audience","_ref$setCookie","match","warn","remember","_setRememberHeaders","encodeURIComponent","createUser","provider","type","getUserData","recoverSession","defaultHeaders","TextHTTPError","HTTPError","getPagination","_pagination","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_extendableBuiltin","cls","ExtendableBuiltin","Reflect","construct","Array","from","getPrototypeOf","_extendableBuiltin2","statusText","captureStackTrace","stack","status","_HTTPError","_HTTPError2","API","_sameOrigin","_headers","ok","pagination","items","_this4","credentials","fetch","contentType","parseJsonResponse","text","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_i","Symbol","iterator","next","done","push","isArray","links","total","len","link","_link$split","_link$split2","rel","m","page","parseInt","last","prev","first","Math","max","current"],"mappings":"0GAEAA,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMb,OAAOC,eAAeK,EAAQI,EAAWI,IAAKJ,IAAiB,OAAO,SAAUK,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYX,EAAiBU,EAAYG,UAAWF,GAAiBC,GAAaZ,EAAiBU,EAAaE,GAAqBF,GAA7gB,GAEnB,SAASI,EAAgBC,EAAUL,GAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,qCAEhH,IAAIC,EAAQ,WACV,SAASA,EAAMC,GACbJ,EAAgBK,KAAMF,GAEtBE,KAAKD,KAAOA,EAkDd,OA5CAnB,EAAakB,EAAO,CAAC,CACnBR,IAAK,YACLX,MAAO,SAAmBsB,GACxB,OAAOD,KAAKD,KAAKG,SAAS,eAAgB,CACxCC,OAAQ,MACRC,SAAUH,MAGb,CACDX,IAAK,UACLX,MAAO,SAAiBoB,GACtB,OAAOC,KAAKD,KAAKG,SAAS,gBAAkBH,EAAKM,MAElD,CACDf,IAAK,aACLX,MAAO,SAAoBoB,GACzB,IAAIO,EAAaC,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAErF,OAAOP,KAAKD,KAAKG,SAAS,gBAAkBH,EAAKM,GAAI,CACnDF,OAAQ,MACRM,KAAMC,KAAKC,UAAUL,OAGxB,CACDhB,IAAK,aACLX,MAAO,SAAoBiC,EAAOC,GAChC,IAAIP,EAAaC,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAIrF,OAFAD,EAAWM,MAAQA,EACnBN,EAAWO,SAAWA,EACfb,KAAKD,KAAKG,SAAS,eAAgB,CACxCC,OAAQ,OACRM,KAAMC,KAAKC,UAAUL,OAGxB,CACDhB,IAAK,aACLX,MAAO,SAAoBoB,GACzB,OAAOC,KAAKD,KAAKG,SAAS,gBAAkBH,EAAKM,GAAI,CACnDF,OAAQ,eAKPL,EAtDG,GAyDZpB,EAAQoC,QAAUhB,G,kCCjElBtB,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIoC,EAAWvC,OAAOwC,QAAU,SAAUlC,GAAU,IAAK,IAAIE,EAAI,EAAGA,EAAIuB,UAAUtB,OAAQD,IAAK,CAAE,IAAIiC,EAASV,UAAUvB,GAAI,IAAK,IAAIM,KAAO2B,EAAczC,OAAOkB,UAAUwB,eAAeC,KAAKF,EAAQ3B,KAAQR,EAAOQ,GAAO2B,EAAO3B,IAAY,OAAOR,GAEnPF,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMb,OAAOC,eAAeK,EAAQI,EAAWI,IAAKJ,IAAiB,OAAO,SAAUK,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYX,EAAiBU,EAAYG,UAAWF,GAAiBC,GAAaZ,EAAiBU,EAAaE,GAAqBF,GAA7gB,GAEf6B,EAAkB,EAAQ,QAE1BC,EAAmBC,EAAuBF,GAE1CG,EAAS,EAAQ,QAEjBC,EAAUF,EAAuBC,GAErC,SAASD,EAAuBG,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAEX,QAASW,GAEvF,SAAS9B,EAAgBC,EAAUL,GAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,qCAEhH,IAAI8B,EAAe,IACfC,EAAa,cACbC,EAAkB,GAClBC,EAAc,KACdC,EAA4B,CAAEC,IAAK,EAAGC,MAAO,EAAG7B,SAAU,EAAG8B,IAAK,GAClEC,EAA0B,CAAEH,IAAK,GACjCI,EAAY,WACd,MAAyB,qBAAXC,QAGZC,EAAO,WACT,SAASA,EAAKN,EAAKO,EAAenC,GAChCT,EAAgBK,KAAMsC,GAEtBtC,KAAKgC,IAAMA,EACXhC,KAAKkC,IAAMF,EAAIQ,OACfxC,KAAKI,SAAWA,EAChBJ,KAAKyC,sBAAsBF,GAC3BT,EAAc9B,KAsMhB,OAnMApB,EAAa0D,EAAM,CAAC,CAClBhD,IAAK,SACLX,MAAO,SAAgB2B,GACrB,IAAIoC,EAAQ1C,KAEZ,OAAOA,KAAKE,SAAS,QAAS,CAC5BC,OAAQ,MACRM,KAAMC,KAAKC,UAAUL,KACpBqC,MAAK,SAAUC,GAChB,OAAOF,EAAMG,cAAcD,GAAUE,4BAGxC,CACDxD,IAAK,MACLX,MAAO,SAAaoE,GAClB,IAAIC,EAAgBhD,KAAKiD,eACrBC,EAAaF,EAAcE,WAC3BC,EAAgBH,EAAcG,cAC9BC,EAAeJ,EAAcI,aAEjC,OAAIL,GAAgBG,EAAavB,EAAe0B,KAAKC,MAC5CtD,KAAKuD,cAAcJ,GAErBK,QAAQC,QAAQL,KAExB,CACD9D,IAAK,SACLX,MAAO,WACL,OAAOqB,KAAKE,SAAS,UAAW,CAAEC,OAAQ,SAAUwC,KAAK3C,KAAK0D,aAAaC,KAAK3D,OAAO4D,MAAM5D,KAAK0D,aAAaC,KAAK3D,SAErH,CACDV,IAAK,gBACLX,MAAO,SAAuBwE,GAC5B,IAAIU,EAAS7D,KAEb,OAAI6B,EAAgBsB,GACXtB,EAAgBsB,GAElBtB,EAAgBsB,GAAiBnD,KAAKgC,IAAI8B,QAAQ,SAAU,CACjE3D,OAAQ,OACR4D,QAAS,CAAE,eAAgB,qCAC3BtD,KAAM,0CAA4C0C,IACjDR,MAAK,SAAUC,GAIhB,cAHOf,EAAgBsB,GACvBU,EAAOpB,sBAAsBG,GAC7BiB,EAAOf,uBACAe,EAAO5B,MAAMmB,gBACnBQ,OAAM,SAAUI,GAGjB,cAFOnC,EAAgBsB,GACvBU,EAAOH,eACAF,QAAQS,OAAOD,QAGzB,CACD1E,IAAK,WACLX,MAAO,SAAkBuF,GACvB,IAAIC,EAASnE,KAEToE,EAAU7D,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAElF6D,EAAQL,QAAUK,EAAQL,SAAW,GAErC,IAAI9D,EAAMmE,EAAQhE,UAAYJ,KAAKI,SAKnC,OAJIH,IACFmE,EAAQL,QAAQ,aAAe9D,GAG1BD,KAAKqE,MAAM1B,MAAK,SAAUV,GAC/B,OAAOkC,EAAOnC,IAAI8B,QAAQI,EAAMnD,EAAS,CACvCgD,QAASvF,OAAOwC,OAAOoD,EAAQL,QAAS,CACtCO,cAAe,UAAYrC,KAE5BmC,IAAUR,OAAM,SAAUW,GAQ3B,OAPIA,aAAenD,EAAgBoD,eAAiBD,EAAIE,OAClDF,EAAIE,KAAKC,IACXH,EAAII,QAAUJ,EAAIE,KAAKC,IACdH,EAAIE,KAAKT,QAClBO,EAAII,QAAUJ,EAAIE,KAAKT,MAAQ,KAAOO,EAAIE,KAAKG,oBAG5CpB,QAAQS,OAAOM,WAI3B,CACDjF,IAAK,cACLX,MAAO,WACL,OAAOqB,KAAKE,SAAS,SAASyC,KAAK3C,KAAK6C,cAAcc,KAAK3D,OAAO2C,KAAK3C,KAAK8C,qBAAqBa,KAAK3D,SAEvG,CACDV,IAAK,gBACLX,MAAO,SAAuB2B,EAAYuE,GACxC,IAAK,IAAIvF,KAAOgB,EACVhB,KAAOgD,EAAK5C,WAAaJ,KAAOyC,IAGpC/B,KAAKV,GAAOgB,EAAWhB,IAKzB,OAHIuF,IACF7E,KAAK8E,cAAe,GAEf9E,OAER,CACDV,IAAK,wBACLX,MAAO,SAA+B4D,GACpCvC,KAAKiC,MAAQM,EACb,IAAIwC,OAAS,EACb,IACEA,EAASrE,KAAKsE,MAAMC,EAAgB1C,EAAca,aAAa8B,MAAM,KAAK,KAC1ElF,KAAKiC,MAAMiB,WAA0B,IAAb6B,EAAOI,IAC/B,MAAOC,GACPC,QAAQrB,MAAM,IAAIsB,MAAM,oDAAsD5E,KAAKC,UAAU4B,QAGhG,CACDjD,IAAK,uBACLX,MAAO,WAKL,OAHIyD,KAAemD,aAAaC,QAAQ5D,IACtC5B,KAAKyF,eAEAzF,OAER,CACDV,IAAK,eACLX,MAAO,WAEL,OADAyD,KAAemD,aAAaG,QAAQ9D,EAAYlB,KAAKC,UAAUX,KAAK2F,WAC7D3F,OAER,CACDV,IAAK,eACLX,MAAO,WACL,OAAOqB,KAAKiC,QAEb,CACD3C,IAAK,eACLX,MAAO,WACL2D,EAAKsD,qBACL5F,KAAKiC,MAAQ,KACbH,EAAc,OAEf,CACDxC,IAAK,QACLuG,IAAK,WACH,OAAO,IAAIrE,EAAQV,QAAQd,QAE5B,CACDV,IAAK,WACLuG,IAAK,WACH,IAAIC,EAAW,GACf,IAAK,IAAIxG,KAAOU,KACVV,KAAOgD,EAAK5C,WAAaJ,KAAO6C,IAGpC2D,EAASxG,GAAOU,KAAKV,IAEvB,OAAOwG,KAEP,CAAC,CACHxG,IAAK,qBACLX,MAAO,WACLyD,KAAemD,aAAaQ,WAAWnE,KAExC,CACDtC,IAAK,iBACLX,MAAO,SAAwBqH,GAC7B,GAAIlE,EACF,OAAOA,EAGT,IAAI2C,EAAOrC,KAAemD,aAAaC,QAAQ5D,GAC/C,GAAI6C,EACF,IACE,IAAIwB,EAAOvF,KAAKsE,MAAMP,GAClBvC,EAAM+D,EAAK/D,IACXD,EAAQgE,EAAKhE,MACb7B,EAAW6F,EAAK7F,SAEpB,IAAK8B,IAAQD,EACX,OAAO,KAGT,IAAID,EAAMgE,GAAe,IAAI3E,EAAiBP,QAAQoB,EAAK,IAC3D,OAAO,IAAII,EAAKN,EAAKC,EAAO7B,GAAUyC,cAAcoD,GAAM,GAC1D,MAAOC,GAEP,OADAb,QAAQrB,MAAM,IAAIsB,MAAM,wCAA0CY,IAC3D,KAIX,OAAO,SAIJ5D,EA9ME,GAoNX,SAAS2C,EAAgBkB,GAEvB,IAAIC,EAASD,EAAIE,QAAQ,KAAM,KAAKA,QAAQ,KAAM,KAClD,OAAQD,EAAOnH,OAAS,GACtB,KAAK,EACH,MACF,KAAK,EACHmH,GAAU,KACV,MACF,KAAK,EACHA,GAAU,IACV,MACF,QACE,KAAM,4BAEV,IAAIE,EAASjE,OAAOkE,KAAKH,GACzB,IACE,OAAOI,mBAAmBC,OAAOH,IACjC,MAAO/B,GACP,OAAO+B,GAtBX5H,EAAQoC,QAAUwB,G,oCCjPlB,yBAA4gB,EAAG,G,yCCA/gB,IAAIoE,EAAS,WAAa,IAAIC,EAAI3G,KAAS4G,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,OAAO,CAACG,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBR,EAAIS,eAAeF,MAAW,CAACJ,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACO,MAAM,CAAC,IAAM,iBAAiB,CAACV,EAAIW,GAAG,qBAAqBR,EAAG,QAAQ,CAACS,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAU9I,MAAOgI,EAAe,YAAEe,WAAW,gBAAgBV,YAAY,eAAeK,MAAM,CAAC,GAAK,eAAe,KAAO,WAAW,SAAW,IAAIM,SAAS,CAAC,MAAShB,EAAe,aAAGM,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOpI,OAAO8I,YAAqBjB,EAAIkB,YAAYX,EAAOpI,OAAOH,aAAYmI,EAAG,SAAS,CAACE,YAAY,4BAA4BK,MAAM,CAAC,KAAO,WAAW,CAACV,EAAIW,GAAG,aAAcX,EAAS,MAAEG,EAAG,MAAM,CAACE,YAAY,qBAAqBK,MAAM,CAAC,KAAO,UAAU,CAACV,EAAIW,GAAG,IAAIX,EAAImB,GAAGnB,EAAI3C,OAAO,OAAO2C,EAAIoB,KAAMpB,EAAmB,gBAAEG,EAAG,MAAM,CAACE,YAAY,sBAAsBK,MAAM,CAAC,KAAO,UAAU,CAACV,EAAIW,GAAG,sCAAsCX,EAAIoB,cAC7kCC,EAAkB,G,qBCEP,GACbR,KAAM,UACNvB,KAAM,WACJ,MAAO,CACL4B,iBAAarH,EACbT,KAAM,GACNiE,WAAOxD,EACPyH,iBAAiB,IAGrBC,QAVa,WAWXlI,KAAKmI,UAGPC,QAAS,CACPD,OADO,WACG,WACFE,EAAO,IAAIC,IAAO,CACtBC,OAAQ,8BACRnI,SAAU,GACVoI,WAAW,IAGbH,EAAKI,QAAQzI,KAAK0I,OAAOC,OAAOC,WAC7BjG,MAAK,SAAAkG,GAAS,EAAK9I,KAAO8I,KAC1BjF,OAAM,SAAAI,GAAW,EAAKA,MAAQA,MAGnCoD,eAbO,WAaW,WAChBpH,KAAKD,KAAK+I,OAAO,CAAEjI,SAAUb,KAAK6H,cAC/BlF,MAAK,SAAAkG,GACJ,EAAK9I,KAAO8I,EACZ,EAAKZ,iBAAkB,EACvB,EAAKjE,WAAQxD,KAEdoD,OAAM,SAAAI,GAAW,EAAKA,MAAQA,QCrCqP,I,wBCQxR+E,EAAY,eACd,EACArC,EACAsB,GACA,EACA,KACA,KACA,MAIa,aAAAe,E,sECjBfvK,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIC,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMb,OAAOC,eAAeK,EAAQI,EAAWI,IAAKJ,IAAiB,OAAO,SAAUK,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYX,EAAiBU,EAAYG,UAAWF,GAAiBC,GAAaZ,EAAiBU,EAAaE,GAAqBF,GAA7gB,GAEf6B,EAAkB,EAAQ,QAE1BC,EAAmBC,EAAuBF,GAE1C4H,EAAQ,EAAQ,QAEhBC,EAAS3H,EAAuB0H,GAEpC,SAAS1H,EAAuBG,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAEX,QAASW,GAEvF,SAAS9B,EAAgBC,EAAUL,GAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,qCAEhH,IAAIqJ,EAAa,aACbC,EAAgB,qBAEhBb,EAAS,WACX,SAASA,IACP,IAAIc,EAAO7I,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3E8I,EAAcD,EAAKb,OACnBA,OAAyB/H,IAAhB6I,EAA4BF,EAAgBE,EACrDC,EAAgBF,EAAKhJ,SACrBA,OAA6BI,IAAlB8I,EAA8B,GAAKA,EAC9CC,EAAiBH,EAAKZ,UACtBA,OAA+BhI,IAAnB+I,GAAuCA,EAEvD5J,EAAgBK,KAAMsI,GAElBC,EAAOiB,MAAMN,IACf7D,QAAQoE,KAAK,uGAGXrJ,IACFJ,KAAKI,SAAWA,GAGlBJ,KAAKwI,UAAYA,EAEjBxI,KAAKgC,IAAM,IAAIX,EAAiBP,QAAQyH,GA2I1C,OAxIA3J,EAAa0J,EAAQ,CAAC,CACpBhJ,IAAK,WACLX,MAAO,SAAkBuF,GACvB,IAAIE,EAAU7D,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAElF6D,EAAQL,QAAUK,EAAQL,SAAW,GACrC,IAAI9D,EAAMmE,EAAQhE,UAAYJ,KAAKI,SAInC,OAHIH,IACFmE,EAAQL,QAAQ,aAAe9D,GAE1BD,KAAKgC,IAAI8B,QAAQI,EAAME,GAASR,OAAM,SAAUW,GAQrD,OAPIA,aAAenD,EAAgBoD,eAAiBD,EAAIE,OAClDF,EAAIE,KAAKC,IACXH,EAAII,QAAUJ,EAAIE,KAAKC,IACdH,EAAIE,KAAKT,QAClBO,EAAII,QAAUJ,EAAIE,KAAKT,MAAQ,KAAOO,EAAIE,KAAKG,oBAG5CpB,QAAQS,OAAOM,QAGzB,CACDjF,IAAK,WACLX,MAAO,WACL,OAAOqB,KAAKE,SAAS,eAEtB,CACDZ,IAAK,SACLX,MAAO,SAAgBiC,EAAOC,EAAUoF,GACtC,OAAOjG,KAAKE,SAAS,UAAW,CAC9BC,OAAQ,OACRM,KAAMC,KAAKC,UAAU,CAAEC,MAAOA,EAAOC,SAAUA,EAAUoF,KAAMA,QAGlE,CACD3G,IAAK,QACLX,MAAO,SAAeiC,EAAOC,EAAU6I,GACrC,IAAIhH,EAAQ1C,KAGZ,OADAA,KAAK2J,oBAAoBD,GAClB1J,KAAKE,SAAS,SAAU,CAC7BC,OAAQ,OACR4D,QAAS,CAAE,eAAgB,qCAC3BtD,KAAM,gCAAkCmJ,mBAAmBhJ,GAAS,aAAegJ,mBAAmB/I,KACrG8B,MAAK,SAAUC,GAEhB,OADAqG,EAAOnI,QAAQ8E,qBACRlD,EAAMmH,WAAWjH,EAAU8G,QAGrC,CACDpK,IAAK,mBACLX,MAAO,SAA0BmL,GAC/B,OAAO9J,KAAKgC,IAAIQ,OAAS,uBAAyBsH,IAEnD,CACDxK,IAAK,UACLX,MAAO,SAAiBsD,EAAOyH,GAE7B,OADA1J,KAAK2J,oBAAoBD,GAClB1J,KAAKmI,OAAO,SAAUlG,EAAOyH,KAErC,CACDpK,IAAK,0BACLX,MAAO,SAAiCiC,GACtC,OAAOZ,KAAKE,SAAS,WAAY,CAC/BC,OAAQ,OACRM,KAAMC,KAAKC,UAAU,CAAEC,MAAOA,QAGjC,CACDtB,IAAK,UACLX,MAAO,SAAiBsD,EAAOyH,GAE7B,OADA1J,KAAK2J,oBAAoBD,GAClB1J,KAAKmI,OAAO,WAAYlG,EAAOyH,KAEvC,CACDpK,IAAK,eACLX,MAAO,SAAsBsD,EAAOpB,EAAU6I,GAC5C,IAAI7F,EAAS7D,KAGb,OADAA,KAAK2J,oBAAoBD,GAClB1J,KAAKE,SAAS,UAAW,CAC9BC,OAAQ,OACRM,KAAMC,KAAKC,UAAU,CAAEsB,MAAOA,EAAOpB,SAAUA,EAAUkJ,KAAM,aAC9DpH,MAAK,SAAUC,GAChB,OAAOiB,EAAOgG,WAAWjH,EAAU8G,QAGtC,CACDpK,IAAK,0BACLX,MAAO,SAAiCmL,EAAU7H,GAChD,OAAOjC,KAAKgC,IAAIQ,OAAS,uBAAyBsH,EAAW,iBAAmB7H,IAEjF,CACD3C,IAAK,aACLX,MAAO,SAAoB4D,GACzB,IAAImH,EAAWnJ,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,IAAmBA,UAAU,GAE9EP,KAAK2J,oBAAoBD,GACzB,IAAI3J,EAAO,IAAIkJ,EAAOnI,QAAQd,KAAKgC,IAAKO,EAAevC,KAAKI,UAC5D,OAAOL,EAAKiK,cAAcrH,MAAK,SAAU5C,GAIvC,OAHI2J,GACF3J,EAAK0F,eAEA1F,OAGV,CACDT,IAAK,cACLX,MAAO,WACL,IAAIoB,EAAOkJ,EAAOnI,QAAQmJ,eAAejK,KAAKgC,KAE9C,OADAjC,GAAQC,KAAK2J,oBAAoB5J,EAAK+E,cAC/B/E,IAER,CACDT,IAAK,SACLX,MAAO,SAAgBoL,EAAM9H,EAAOyH,GAClC,IAAIvF,EAASnE,KAGb,OADAA,KAAK2J,oBAAoBD,GAClB1J,KAAKE,SAAS,UAAW,CAC9BC,OAAQ,OACRM,KAAMC,KAAKC,UAAU,CAAEsB,MAAOA,EAAO8H,KAAMA,MAC1CpH,MAAK,SAAUC,GAChB,OAAOuB,EAAO0F,WAAWjH,EAAU8G,QAGtC,CACDpK,IAAK,sBACLX,MAAO,SAA6B+K,GAC9B1J,KAAKwI,YACPxI,KAAKgC,IAAIkI,eAAiBlK,KAAKgC,IAAIkI,gBAAkB,GACrDlK,KAAKgC,IAAIkI,eAAe,gBAAkBR,EAAW,IAAM,eAK1DpB,EAjKI,GAoKb5J,EAAQoC,QAAUwH,EAGI,qBAAXjG,SACTA,OAAOiG,OAASA,I,oCC7LlB9J,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQ8F,cAAgB9F,EAAQyL,cAAgBzL,EAAQ0L,UAAY1L,EAAQ2L,mBAAgB7J,EAE5F,IAAIO,EAAWvC,OAAOwC,QAAU,SAAUlC,GAAU,IAAK,IAAIE,EAAI,EAAGA,EAAIuB,UAAUtB,OAAQD,IAAK,CAAE,IAAIiC,EAASV,UAAUvB,GAAI,IAAK,IAAIM,KAAO2B,EAAczC,OAAOkB,UAAUwB,eAAeC,KAAKF,EAAQ3B,KAAQR,EAAOQ,GAAO2B,EAAO3B,IAAY,OAAOR,GAEnPF,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMb,OAAOC,eAAeK,EAAQI,EAAWI,IAAKJ,IAAiB,OAAO,SAAUK,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYX,EAAiBU,EAAYG,UAAWF,GAAiBC,GAAaZ,EAAiBU,EAAaE,GAAqBF,GAA7gB,GAEf+K,EAAc,EAAQ,QAS1B,SAAS3K,EAAgBC,EAAUL,GAAe,KAAMK,aAAoBL,GAAgB,MAAM,IAAIM,UAAU,qCAEhH,SAAS0K,EAA2BC,EAAMrJ,GAAQ,IAAKqJ,EAAQ,MAAM,IAAIC,eAAe,6DAAgE,OAAOtJ,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BqJ,EAAPrJ,EAElO,SAASuJ,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAI/K,UAAU,kEAAoE+K,GAAeD,EAASjL,UAAYlB,OAAOqM,OAAOD,GAAcA,EAAWlL,UAAW,CAAEoL,YAAa,CAAEnM,MAAOgM,EAAUxL,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAewL,IAAYpM,OAAOuM,eAAiBvM,OAAOuM,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,SAASK,EAAmBC,GAC1B,SAASC,IACP,IAAIvL,EAAWwL,QAAQC,UAAUH,EAAKI,MAAMC,KAAKhL,YAEjD,OADA/B,OAAOuM,eAAenL,EAAUpB,OAAOgN,eAAexL,OAC/CJ,EAkBT,OAfAuL,EAAkBzL,UAAYlB,OAAOqM,OAAOK,EAAIxL,UAAW,CACzDoL,YAAa,CACXnM,MAAOuM,EACP/L,YAAY,EACZE,UAAU,EACVD,cAAc,KAIdZ,OAAOuM,eACTvM,OAAOuM,eAAeI,EAAmBD,GAEzCC,EAAkBH,UAAYE,EAGzBC,EAnCT3M,OAAOC,eAAeC,EAAS,gBAAiB,CAC9CS,YAAY,EACZ0G,IAAK,WACH,OAAOyE,EAAYD,iBAmCvB,IAAID,EAAY1L,EAAQ0L,UAAY,SAAUqB,GAG5C,SAASrB,EAAUxH,GACjBjD,EAAgBK,KAAMoK,GAEtB,IAAI1H,EAAQ6H,EAA2BvK,MAAOoK,EAAUY,WAAaxM,OAAOgN,eAAepB,IAAYjJ,KAAKnB,KAAM4C,EAAS8I,aAS3H,OAPAhJ,EAAM8E,KAAO9E,EAAMoI,YAAYtD,KACQ,oBAA5BlC,MAAMqG,kBACfrG,MAAMqG,kBAAkBjJ,EAAOA,EAAMoI,aAErCpI,EAAMkJ,MAAQ,IAAItG,MAAM1C,EAAS8I,YAAYE,MAE/ClJ,EAAMmJ,OAASjJ,EAASiJ,OACjBnJ,EAGT,OAjBAgI,EAAUN,EAAWqB,GAiBdrB,EAlB2B,CAmBlCa,EAAmB3F,QAEjB6E,EAAgBzL,EAAQyL,cAAgB,SAAU2B,GAGpD,SAAS3B,EAAcvH,EAAUqD,GAC/BtG,EAAgBK,KAAMmK,GAEtB,IAAItG,EAAS0G,EAA2BvK,MAAOmK,EAAca,WAAaxM,OAAOgN,eAAerB,IAAgBhJ,KAAKnB,KAAM4C,IAG3H,OADAiB,EAAOoC,KAAOA,EACPpC,EAGT,OAXA6G,EAAUP,EAAe2B,GAWlB3B,EAZmC,CAa1CC,GAEE5F,EAAgB9F,EAAQ8F,cAAgB,SAAUuH,GAGpD,SAASvH,EAAc5B,EAAU6B,GAC/B9E,EAAgBK,KAAMwE,GAEtB,IAAIL,EAASoG,EAA2BvK,MAAOwE,EAAcwG,WAAaxM,OAAOgN,eAAehH,IAAgBrD,KAAKnB,KAAM4C,IAG3H,OADAuB,EAAOM,KAAOA,EACPN,EAGT,OAXAuG,EAAUlG,EAAeuH,GAWlBvH,EAZmC,CAa1C4F,GAEE4B,EAAM,WACR,SAASA,IACP,IAAIxJ,EAASjC,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC7E6D,EAAU7D,UAAU,GAExBZ,EAAgBK,KAAMgM,GAEtBhM,KAAKwC,OAASA,EACVxC,KAAKwC,OAAOgH,MAAM,cAEpBxJ,KAAKiM,aAAc,GAErBjM,KAAKkK,eAAiB9F,GAAWA,EAAQ8F,gBAAkB,GAqD7D,OAlDAtL,EAAaoN,EAAK,CAAC,CACjB1M,IAAK,UACLX,MAAO,WACL,IAAIuN,EAAW3L,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAEnF,OAAOQ,EAAS,GAAIf,KAAKkK,eAAgB,CACvC,eAAgB,oBACfgC,KAEJ,CACD5M,IAAK,oBACLX,MAAO,SAA2BiE,GAChC,OAAOA,EAAS6B,OAAO9B,MAAK,SAAU8B,GACpC,IAAK7B,EAASuJ,GACZ,OAAO3I,QAAQS,OAAO,IAAIO,EAAc5B,EAAU6B,IAGpD,IAAI2H,GAAa,EAAI9B,EAAYD,eAAezH,GAChD,OAAOwJ,EAAa,CAAEA,WAAYA,EAAYC,MAAO5H,GAASA,OAGjE,CACDnF,IAAK,UACLX,MAAO,SAAiBuF,GACtB,IAAIoI,EAAStM,KAEToE,EAAU7D,UAAUtB,OAAS,QAAsBuB,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAE9EwD,EAAU/D,KAAK+D,QAAQK,EAAQL,SAAW,IAI9C,OAHI/D,KAAKiM,cACP7H,EAAQmI,YAAcnI,EAAQmI,aAAe,eAExCC,MAAMxM,KAAKwC,OAAS0B,EAAMnD,EAAS,GAAIqD,EAAS,CAAEL,QAASA,KAAYpB,MAAK,SAAUC,GAC3F,IAAI6J,EAAc7J,EAASmB,QAAQ8B,IAAI,gBACvC,OAAI4G,GAAeA,EAAYjD,MAAM,QAC5B8C,EAAOI,kBAAkB9J,GAG7BA,EAASuJ,GAKPvJ,EAAS+J,OAAOhK,MAAK,SAAUsD,OAJ7BrD,EAAS+J,OAAOhK,MAAK,SAAUsD,GACpC,OAAOzC,QAAQS,OAAO,IAAIkG,EAAcvH,EAAUqD,cAUrD+F,EAjEC,GAoEVtN,EAAQoC,QAAUkL,G,kCCxKlBxN,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAGT,IAAIiO,EAAiB,WAAc,SAASC,EAAcC,EAAK9N,GAAK,IAAI+N,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWlF,OAAKvH,EAAW,IAAM,IAAK,IAAiCsH,EAA7BoF,EAAKJ,EAAIK,OAAOC,cAAmBJ,GAAMlF,EAAKoF,EAAGG,QAAQC,MAAON,GAAK,EAA6B,GAArBD,EAAKQ,KAAKzF,EAAGnJ,OAAYK,GAAK+N,EAAK9N,SAAWD,EAAG,MAAW,MAAOuF,GAAO0I,GAAK,EAAMlF,EAAKxD,EAAO,QAAU,KAAWyI,GAAME,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAID,EAAI,MAAMlF,GAAQ,OAAOgF,EAAQ,OAAO,SAAUD,EAAK9N,GAAK,GAAIsM,MAAMkC,QAAQV,GAAQ,OAAOA,EAAY,GAAIK,OAAOC,YAAY5O,OAAOsO,GAAQ,OAAOD,EAAcC,EAAK9N,GAAa,MAAM,IAAIa,UAAU,yDAAjkB,GAGrB,SAASwK,EAAczH,GACrB,IAAI6K,EAAQ7K,EAASmB,QAAQ8B,IAAI,QAC7BuG,EAAa,GAEjB,GAAa,MAATqB,EACF,OAAO,KAETA,EAAQA,EAAMvI,MAAM,KAGpB,IAFA,IAAIwI,EAAQ9K,EAASmB,QAAQ8B,IAAI,iBAExB7G,EAAI,EAAG2O,EAAMF,EAAMxO,OAAQD,EAAI2O,EAAK3O,IAAK,CAChD,IAAI4O,EAAOH,EAAMzO,GAAGqH,QAAQ,cAAe,IAEvCwH,EAAcD,EAAK1I,MAAM,KACzB4I,EAAelB,EAAeiB,EAAa,GAC3C3L,EAAM4L,EAAa,GACnBC,EAAMD,EAAa,GAEnBE,EAAI9L,EAAIsH,MAAM,cACdyE,EAAOD,GAAKE,SAASF,EAAE,GAAI,IAC3BD,EAAIvE,MAAM,QACZ4C,EAAW+B,KAAOF,EACTF,EAAIvE,MAAM,QACnB4C,EAAWiB,KAAOY,EACTF,EAAIvE,MAAM,QACnB4C,EAAWgC,KAAOH,EACTF,EAAIvE,MAAM,WACnB4C,EAAWiC,MAAQJ,GAQvB,OAJA7B,EAAW+B,KAAOG,KAAKC,IAAInC,EAAW+B,MAAQ,EAAG/B,EAAWgC,MAAQhC,EAAWgC,KAAO,GAAK,GAC3FhC,EAAWoC,QAAUpC,EAAWiB,KAAOjB,EAAWiB,KAAO,EAAIjB,EAAW+B,MAAQ,EAChF/B,EAAWsB,MAAQA,EAAQQ,SAASR,EAAO,IAAM,KAE1CtB,EApCT1N,EAAQ2L,cAAgBA","file":"js/recovery.b476a6b8.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Admin = function () {\n  function Admin(user) {\n    _classCallCheck(this, Admin);\n\n    this.user = user;\n  }\n\n  // Return a list of all users in an audience\n\n\n  _createClass(Admin, [{\n    key: \"listUsers\",\n    value: function listUsers(aud) {\n      return this.user._request(\"/admin/users\", {\n        method: \"GET\",\n        audience: aud\n      });\n    }\n  }, {\n    key: \"getUser\",\n    value: function getUser(user) {\n      return this.user._request(\"/admin/users/\" + user.id);\n    }\n  }, {\n    key: \"updateUser\",\n    value: function updateUser(user) {\n      var attributes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      return this.user._request(\"/admin/users/\" + user.id, {\n        method: \"PUT\",\n        body: JSON.stringify(attributes)\n      });\n    }\n  }, {\n    key: \"createUser\",\n    value: function createUser(email, password) {\n      var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      attributes.email = email;\n      attributes.password = password;\n      return this.user._request(\"/admin/users\", {\n        method: \"POST\",\n        body: JSON.stringify(attributes)\n      });\n    }\n  }, {\n    key: \"deleteUser\",\n    value: function deleteUser(user) {\n      return this.user._request(\"/admin/users/\" + user.id, {\n        method: \"DELETE\"\n      });\n    }\n  }]);\n\n  return Admin;\n}();\n\nexports.default = Admin;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _microApiClient = require(\"micro-api-client\");\n\nvar _microApiClient2 = _interopRequireDefault(_microApiClient);\n\nvar _admin = require(\"./admin\");\n\nvar _admin2 = _interopRequireDefault(_admin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ExpiryMargin = 60 * 1000;\nvar storageKey = \"gotrue.user\";\nvar refreshPromises = {};\nvar currentUser = null;\nvar forbiddenUpdateAttributes = { api: 1, token: 1, audience: 1, url: 1 };\nvar forbiddenSaveAttributes = { api: 1 };\nvar isBrowser = function isBrowser() {\n  return typeof window !== \"undefined\";\n};\n\nvar User = function () {\n  function User(api, tokenResponse, audience) {\n    _classCallCheck(this, User);\n\n    this.api = api;\n    this.url = api.apiURL;\n    this.audience = audience;\n    this._processTokenResponse(tokenResponse);\n    currentUser = this;\n  }\n\n  _createClass(User, [{\n    key: \"update\",\n    value: function update(attributes) {\n      var _this = this;\n\n      return this._request(\"/user\", {\n        method: \"PUT\",\n        body: JSON.stringify(attributes)\n      }).then(function (response) {\n        return _this._saveUserData(response)._refreshSavedSession();\n      });\n    }\n  }, {\n    key: \"jwt\",\n    value: function jwt(forceRefresh) {\n      var _tokenDetails = this.tokenDetails(),\n          expires_at = _tokenDetails.expires_at,\n          refresh_token = _tokenDetails.refresh_token,\n          access_token = _tokenDetails.access_token;\n\n      if (forceRefresh || expires_at - ExpiryMargin < Date.now()) {\n        return this._refreshToken(refresh_token);\n      }\n      return Promise.resolve(access_token);\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      return this._request(\"/logout\", { method: \"POST\" }).then(this.clearSession.bind(this)).catch(this.clearSession.bind(this));\n    }\n  }, {\n    key: \"_refreshToken\",\n    value: function _refreshToken(refresh_token) {\n      var _this2 = this;\n\n      if (refreshPromises[refresh_token]) {\n        return refreshPromises[refresh_token];\n      }\n      return refreshPromises[refresh_token] = this.api.request(\"/token\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: \"grant_type=refresh_token&refresh_token=\" + refresh_token\n      }).then(function (response) {\n        delete refreshPromises[refresh_token];\n        _this2._processTokenResponse(response);\n        _this2._refreshSavedSession();\n        return _this2.token.access_token;\n      }).catch(function (error) {\n        delete refreshPromises[refresh_token];\n        _this2.clearSession();\n        return Promise.reject(error);\n      });\n    }\n  }, {\n    key: \"_request\",\n    value: function _request(path) {\n      var _this3 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      options.headers = options.headers || {};\n\n      var aud = options.audience || this.audience;\n      if (aud) {\n        options.headers[\"X-JWT-AUD\"] = aud;\n      }\n\n      return this.jwt().then(function (token) {\n        return _this3.api.request(path, _extends({\n          headers: Object.assign(options.headers, {\n            Authorization: \"Bearer \" + token\n          })\n        }, options)).catch(function (err) {\n          if (err instanceof _microApiClient.JSONHTTPError && err.json) {\n            if (err.json.msg) {\n              err.message = err.json.msg;\n            } else if (err.json.error) {\n              err.message = err.json.error + \": \" + err.json.error_description;\n            }\n          }\n          return Promise.reject(err);\n        });\n      });\n    }\n  }, {\n    key: \"getUserData\",\n    value: function getUserData() {\n      return this._request(\"/user\").then(this._saveUserData.bind(this)).then(this._refreshSavedSession.bind(this));\n    }\n  }, {\n    key: \"_saveUserData\",\n    value: function _saveUserData(attributes, fromStorage) {\n      for (var key in attributes) {\n        if (key in User.prototype || key in forbiddenUpdateAttributes) {\n          continue;\n        }\n        this[key] = attributes[key];\n      }\n      if (fromStorage) {\n        this._fromStorage = true;\n      }\n      return this;\n    }\n  }, {\n    key: \"_processTokenResponse\",\n    value: function _processTokenResponse(tokenResponse) {\n      this.token = tokenResponse;\n      var claims = void 0;\n      try {\n        claims = JSON.parse(urlBase64Decode(tokenResponse.access_token.split(\".\")[1]));\n        this.token.expires_at = claims.exp * 1000;\n      } catch (e) {\n        console.error(new Error(\"Gotrue-js: Failed to parse tokenResponse claims: \" + JSON.stringify(tokenResponse)));\n      }\n    }\n  }, {\n    key: \"_refreshSavedSession\",\n    value: function _refreshSavedSession() {\n      // only update saved session if we previously saved something\n      if (isBrowser() && localStorage.getItem(storageKey)) {\n        this._saveSession();\n      }\n      return this;\n    }\n  }, {\n    key: \"_saveSession\",\n    value: function _saveSession() {\n      isBrowser() && localStorage.setItem(storageKey, JSON.stringify(this._details));\n      return this;\n    }\n  }, {\n    key: \"tokenDetails\",\n    value: function tokenDetails() {\n      return this.token;\n    }\n  }, {\n    key: \"clearSession\",\n    value: function clearSession() {\n      User.removeSavedSession();\n      this.token = null;\n      currentUser = null;\n    }\n  }, {\n    key: \"admin\",\n    get: function get() {\n      return new _admin2.default(this);\n    }\n  }, {\n    key: \"_details\",\n    get: function get() {\n      var userCopy = {};\n      for (var key in this) {\n        if (key in User.prototype || key in forbiddenSaveAttributes) {\n          continue;\n        }\n        userCopy[key] = this[key];\n      }\n      return userCopy;\n    }\n  }], [{\n    key: \"removeSavedSession\",\n    value: function removeSavedSession() {\n      isBrowser() && localStorage.removeItem(storageKey);\n    }\n  }, {\n    key: \"recoverSession\",\n    value: function recoverSession(apiInstance) {\n      if (currentUser) {\n        return currentUser;\n      }\n\n      var json = isBrowser() && localStorage.getItem(storageKey);\n      if (json) {\n        try {\n          var data = JSON.parse(json);\n          var url = data.url,\n              token = data.token,\n              audience = data.audience;\n\n          if (!url || !token) {\n            return null;\n          }\n\n          var api = apiInstance || new _microApiClient2.default(url, {});\n          return new User(api, token, audience)._saveUserData(data, true);\n        } catch (ex) {\n          console.error(new Error(\"Gotrue-js: Error recovering session: \" + ex));\n          return null;\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return User;\n}();\n\nexports.default = User;\n\n\nfunction urlBase64Decode(str) {\n  // From https://jwt.io/js/jwt.js\n  var output = str.replace(/-/g, '+').replace(/_/g, '/');\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += '==';\n      break;\n    case 3:\n      output += '=';\n      break;\n    default:\n      throw 'Illegal base64url string!';\n  }\n  var result = window.atob(output); //polifyll https://github.com/davidchambers/Base64.js\n  try {\n    return decodeURIComponent(escape(result));\n  } catch (err) {\n    return result;\n  }\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recover.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recover.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recover\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.updatePassword($event)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"new-password\"}},[_vm._v(\"New Passoword: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPassword),expression:\"newPassword\"}],staticClass:\"form-control\",attrs:{\"id\":\"new-password\",\"type\":\"password\",\"required\":\"\"},domProps:{\"value\":(_vm.newPassword)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newPassword=$event.target.value}}})]),_c('button',{staticClass:\"btn btn-primary btn-block\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Confirm\")]),(_vm.error)?_c('div',{staticClass:\"alert alert-danger\",attrs:{\"role\":\"alert\"}},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e(),(_vm.passwordUpdated)?_c('div',{staticClass:\"alert alert-success\",attrs:{\"role\":\"alert\"}},[_vm._v(\" password changed successfully! \")]):_vm._e()])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport GoTrue from 'gotrue-js'\n\nexport default {\n  name: 'Recover',\n  data: () => {\n    return {\n      newPassword: undefined,\n      user: {},\n      error: undefined,\n      passwordUpdated: false\n    }\n  },\n  created () {\n    this.verify()\n  },\n\n  methods: {\n    verify () {\n      const auth = new GoTrue({\n        APIUrl: 'https://gotrue.ecomplus.biz',\n        audience: '',\n        setCookie: false\n      })\n\n      auth.recover(this.$route.params.pathMatch)\n        .then(res => { this.user = res })\n        .catch(error => { this.error = error })\n    },\n\n    updatePassword () {\n      this.user.update({ password: this.newPassword })\n        .then(res => {\n          this.user = res\n          this.passwordUpdated = true\n          this.error = undefined\n        })\n        .catch(error => { this.error = error })\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Recover.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/eslint-loader/index.js??ref--13-0!./Recover.js?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./html/Recover.html?vue&type=template&id=505ea8f2&lang=html&\"\nimport script from \"./js/Recover.js?vue&type=script&lang=js&\"\nexport * from \"./js/Recover.js?vue&type=script&lang=js&\"\nimport style0 from \"./Recover.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _microApiClient = require(\"micro-api-client\");\n\nvar _microApiClient2 = _interopRequireDefault(_microApiClient);\n\nvar _user = require(\"./user\");\n\nvar _user2 = _interopRequireDefault(_user);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HTTPRegexp = /^http:\\/\\//;\nvar defaultApiURL = \"/.netlify/identity\";\n\nvar GoTrue = function () {\n  function GoTrue() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$APIUrl = _ref.APIUrl,\n        APIUrl = _ref$APIUrl === undefined ? defaultApiURL : _ref$APIUrl,\n        _ref$audience = _ref.audience,\n        audience = _ref$audience === undefined ? \"\" : _ref$audience,\n        _ref$setCookie = _ref.setCookie,\n        setCookie = _ref$setCookie === undefined ? false : _ref$setCookie;\n\n    _classCallCheck(this, GoTrue);\n\n    if (APIUrl.match(HTTPRegexp)) {\n      console.warn(\"Warning:\\n\\nDO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!\\nGoTrue REQUIRES HTTPS to work securely.\");\n    }\n\n    if (audience) {\n      this.audience = audience;\n    }\n\n    this.setCookie = setCookie;\n\n    this.api = new _microApiClient2.default(APIUrl);\n  }\n\n  _createClass(GoTrue, [{\n    key: \"_request\",\n    value: function _request(path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      options.headers = options.headers || {};\n      var aud = options.audience || this.audience;\n      if (aud) {\n        options.headers[\"X-JWT-AUD\"] = aud;\n      }\n      return this.api.request(path, options).catch(function (err) {\n        if (err instanceof _microApiClient.JSONHTTPError && err.json) {\n          if (err.json.msg) {\n            err.message = err.json.msg;\n          } else if (err.json.error) {\n            err.message = err.json.error + \": \" + err.json.error_description;\n          }\n        }\n        return Promise.reject(err);\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      return this._request(\"/settings\");\n    }\n  }, {\n    key: \"signup\",\n    value: function signup(email, password, data) {\n      return this._request(\"/signup\", {\n        method: \"POST\",\n        body: JSON.stringify({ email: email, password: password, data: data })\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login(email, password, remember) {\n      var _this = this;\n\n      this._setRememberHeaders(remember);\n      return this._request(\"/token\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: \"grant_type=password&username=\" + encodeURIComponent(email) + \"&password=\" + encodeURIComponent(password)\n      }).then(function (response) {\n        _user2.default.removeSavedSession();\n        return _this.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"loginExternalUrl\",\n    value: function loginExternalUrl(provider) {\n      return this.api.apiURL + \"/authorize?provider=\" + provider;\n    }\n  }, {\n    key: \"confirm\",\n    value: function confirm(token, remember) {\n      this._setRememberHeaders(remember);\n      return this.verify(\"signup\", token, remember);\n    }\n  }, {\n    key: \"requestPasswordRecovery\",\n    value: function requestPasswordRecovery(email) {\n      return this._request(\"/recover\", {\n        method: \"POST\",\n        body: JSON.stringify({ email: email })\n      });\n    }\n  }, {\n    key: \"recover\",\n    value: function recover(token, remember) {\n      this._setRememberHeaders(remember);\n      return this.verify(\"recovery\", token, remember);\n    }\n  }, {\n    key: \"acceptInvite\",\n    value: function acceptInvite(token, password, remember) {\n      var _this2 = this;\n\n      this._setRememberHeaders(remember);\n      return this._request(\"/verify\", {\n        method: \"POST\",\n        body: JSON.stringify({ token: token, password: password, type: \"signup\" })\n      }).then(function (response) {\n        return _this2.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"acceptInviteExternalUrl\",\n    value: function acceptInviteExternalUrl(provider, token) {\n      return this.api.apiURL + \"/authorize?provider=\" + provider + \"&invite_token=\" + token;\n    }\n  }, {\n    key: \"createUser\",\n    value: function createUser(tokenResponse) {\n      var remember = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      this._setRememberHeaders(remember);\n      var user = new _user2.default(this.api, tokenResponse, this.audience);\n      return user.getUserData().then(function (user) {\n        if (remember) {\n          user._saveSession();\n        }\n        return user;\n      });\n    }\n  }, {\n    key: \"currentUser\",\n    value: function currentUser() {\n      var user = _user2.default.recoverSession(this.api);\n      user && this._setRememberHeaders(user._fromStorage);\n      return user;\n    }\n  }, {\n    key: \"verify\",\n    value: function verify(type, token, remember) {\n      var _this3 = this;\n\n      this._setRememberHeaders(remember);\n      return this._request(\"/verify\", {\n        method: \"POST\",\n        body: JSON.stringify({ token: token, type: type })\n      }).then(function (response) {\n        return _this3.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"_setRememberHeaders\",\n    value: function _setRememberHeaders(remember) {\n      if (this.setCookie) {\n        this.api.defaultHeaders = this.api.defaultHeaders || {};\n        this.api.defaultHeaders[\"X-Use-Cookie\"] = remember ? \"1\" : \"session\";\n      }\n    }\n  }]);\n\n  return GoTrue;\n}();\n\nexports.default = GoTrue;\n\n\nif (typeof window !== \"undefined\") {\n  window.GoTrue = GoTrue;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JSONHTTPError = exports.TextHTTPError = exports.HTTPError = exports.getPagination = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _pagination = require(\"./pagination\");\n\nObject.defineProperty(exports, \"getPagination\", {\n  enumerable: true,\n  get: function get() {\n    return _pagination.getPagination;\n  }\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nvar HTTPError = exports.HTTPError = function (_extendableBuiltin2) {\n  _inherits(HTTPError, _extendableBuiltin2);\n\n  function HTTPError(response) {\n    _classCallCheck(this, HTTPError);\n\n    var _this = _possibleConstructorReturn(this, (HTTPError.__proto__ || Object.getPrototypeOf(HTTPError)).call(this, response.statusText));\n\n    _this.name = _this.constructor.name;\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(_this, _this.constructor);\n    } else {\n      _this.stack = new Error(response.statusText).stack;\n    }\n    _this.status = response.status;\n    return _this;\n  }\n\n  return HTTPError;\n}(_extendableBuiltin(Error));\n\nvar TextHTTPError = exports.TextHTTPError = function (_HTTPError) {\n  _inherits(TextHTTPError, _HTTPError);\n\n  function TextHTTPError(response, data) {\n    _classCallCheck(this, TextHTTPError);\n\n    var _this2 = _possibleConstructorReturn(this, (TextHTTPError.__proto__ || Object.getPrototypeOf(TextHTTPError)).call(this, response));\n\n    _this2.data = data;\n    return _this2;\n  }\n\n  return TextHTTPError;\n}(HTTPError);\n\nvar JSONHTTPError = exports.JSONHTTPError = function (_HTTPError2) {\n  _inherits(JSONHTTPError, _HTTPError2);\n\n  function JSONHTTPError(response, json) {\n    _classCallCheck(this, JSONHTTPError);\n\n    var _this3 = _possibleConstructorReturn(this, (JSONHTTPError.__proto__ || Object.getPrototypeOf(JSONHTTPError)).call(this, response));\n\n    _this3.json = json;\n    return _this3;\n  }\n\n  return JSONHTTPError;\n}(HTTPError);\n\nvar API = function () {\n  function API() {\n    var apiURL = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var options = arguments[1];\n\n    _classCallCheck(this, API);\n\n    this.apiURL = apiURL;\n    if (this.apiURL.match(/\\/[^\\/]?/)) {\n      // eslint-disable-line no-useless-escape\n      this._sameOrigin = true;\n    }\n    this.defaultHeaders = options && options.defaultHeaders || {};\n  }\n\n  _createClass(API, [{\n    key: \"headers\",\n    value: function headers() {\n      var _headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return _extends({}, this.defaultHeaders, {\n        \"Content-Type\": \"application/json\"\n      }, _headers);\n    }\n  }, {\n    key: \"parseJsonResponse\",\n    value: function parseJsonResponse(response) {\n      return response.json().then(function (json) {\n        if (!response.ok) {\n          return Promise.reject(new JSONHTTPError(response, json));\n        }\n\n        var pagination = (0, _pagination.getPagination)(response);\n        return pagination ? { pagination: pagination, items: json } : json;\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function request(path) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      var headers = this.headers(options.headers || {});\n      if (this._sameOrigin) {\n        options.credentials = options.credentials || \"same-origin\";\n      }\n      return fetch(this.apiURL + path, _extends({}, options, { headers: headers })).then(function (response) {\n        var contentType = response.headers.get(\"Content-Type\");\n        if (contentType && contentType.match(/json/)) {\n          return _this4.parseJsonResponse(response);\n        }\n\n        if (!response.ok) {\n          return response.text().then(function (data) {\n            return Promise.reject(new TextHTTPError(response, data));\n          });\n        }\n        return response.text().then(function (data) {\n          data;\n        });\n      });\n    }\n  }]);\n\n  return API;\n}();\n\nexports.default = API;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.getPagination = getPagination;\nfunction getPagination(response) {\n  var links = response.headers.get(\"Link\");\n  var pagination = {};\n  //var link, url, rel, m, page;\n  if (links == null) {\n    return null;\n  }\n  links = links.split(\",\");\n  var total = response.headers.get(\"X-Total-Count\");\n\n  for (var i = 0, len = links.length; i < len; i++) {\n    var link = links[i].replace(/(^\\s*|\\s*$)/, \"\");\n\n    var _link$split = link.split(\";\"),\n        _link$split2 = _slicedToArray(_link$split, 2),\n        url = _link$split2[0],\n        rel = _link$split2[1];\n\n    var m = url.match(/page=(\\d+)/);\n    var page = m && parseInt(m[1], 10);\n    if (rel.match(/last/)) {\n      pagination.last = page;\n    } else if (rel.match(/next/)) {\n      pagination.next = page;\n    } else if (rel.match(/prev/)) {\n      pagination.prev = page;\n    } else if (rel.match(/first/)) {\n      pagination.first = page;\n    }\n  }\n\n  pagination.last = Math.max(pagination.last || 0, pagination.prev && pagination.prev + 1 || 0);\n  pagination.current = pagination.next ? pagination.next - 1 : pagination.last || 1;\n  pagination.total = total ? parseInt(total, 10) : null;\n\n  return pagination;\n}"],"sourceRoot":""}